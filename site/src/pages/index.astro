---
import BaseLayout from "../layouts/BaseLayout.astro";
import { TopNavBar } from "../components/TopNavBar";
import { TuiCodeBox } from "../components/TuiCodeBox";
import { OffsetButton } from "../components/OffsetButton";
import { SectionDivider } from "../components/SectionDivider";
import { FeatureCard } from "../components/FeatureCard";
import { CopyButton } from "../components/CopyButton";
---
<BaseLayout title="stitch-mcp — AI designs, meet your codebase">
  <TopNavBar
    links={[
      { label: "docs", href: "/docs/" },
      { label: "github", href: "https://github.com/nicepkg/stitch-mcp", external: true },
    ]}
  />

  {/* ── Hero ── */}
  <section class="min-h-screen flex flex-col justify-center items-center pt-24 pb-12 px-4">
    <div class="max-w-4xl w-full mx-auto text-center flex flex-col items-center">
      <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight text-white mb-6 leading-tight">
        AI designs,<br />
        meet your codebase.
      </h1>
      <div class="text-left space-y-2 mb-12">
        <p class="text-sm sm:text-base text-dim">
          // The MCP server that gives your coding agent eyes.
        </p>
        <p class="text-sm sm:text-base text-dim">
          // Design context stays local. Code ships production-ready.
        </p>
      </div>

      <div class="mb-12 w-full max-w-xl mx-auto">
        <TuiCodeBox title="bash" command="npx @_davideast/stitch-mcp init" client:idle />
      </div>

      <div class="flex flex-col sm:flex-row gap-6 items-center">
        <OffsetButton href="/docs/" variant="primary">Get Started</OffsetButton>
        <OffsetButton href="https://github.com/nicepkg/stitch-mcp" variant="secondary" external>GitHub</OffsetButton>
      </div>
    </div>
  </section>

  {/* ── Agent Integration ── */}
  <section class="py-24 bg-surface border-t border-b border-border-strong">
    <div class="max-w-6xl mx-auto px-6">
      <div class="mb-12">
        <SectionDivider>Agent Integration</SectionDivider>
      </div>
      <div class="grid lg:grid-cols-2 gap-12 items-start">
        {/* MCP config */}
        <div class="text-sm w-full">
          <div class="text-dim select-none leading-none">┌─ mcp-config.json ────────────────────────────────────┐</div>
          <div class="bg-bg border-l border-r border-border-strong p-6 overflow-x-auto">
            <pre class="text-secondary"><code set:html={`{
  <span class="json-key">"mcpServers"</span>: {
    <span class="json-key">"stitch"</span>: {
      <span class="json-key">"command"</span>: <span class="json-string">"npx"</span>,
      <span class="json-key">"args"</span>: [
        <span class="json-string">"-y"</span>,
        <span class="json-string">"@_davideast/stitch-mcp"</span>
      ],
      <span class="json-key">"env"</span>: {
        <span class="json-key">"PROJECT_ROOT"</span>: <span class="json-string">"./frontend"</span>
      }
    }
  }
}`} /></pre>
          </div>
          <div class="text-dim select-none leading-none">└──────────────────────────────────────────────────────┘</div>
        </div>

        {/* Available tools */}
        <div class="border border-border-strong bg-bg p-8 relative">
          <div class="absolute -top-3 left-4 bg-bg px-2 text-dim text-xs uppercase tracking-widest">Available Tools</div>
          <ul class="space-y-8">
            <li class="flex items-start gap-4">
              <span class="text-white mt-1">▸</span>
              <div>
                <span class="text-white block mb-1 font-bold text-lg">build_site</span>
                <span class="text-dim text-sm">Compiles the design tokens and structure into code.</span>
              </div>
            </li>
            <li class="flex items-start gap-4">
              <span class="text-white mt-1">▸</span>
              <div>
                <span class="text-white block mb-1 font-bold text-lg">get_screen_code</span>
                <span class="text-dim text-sm">Retrieves the JSX/HTML for a specific visual state.</span>
              </div>
            </li>
            <li class="flex items-start gap-4">
              <span class="text-white mt-1">▸</span>
              <div>
                <span class="text-white block mb-1 font-bold text-lg">get_screen_image</span>
                <span class="text-dim text-sm">Returns a snapshot for visual verification.</span>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  {/* ── Get Started ── */}
  <section class="py-24" id="get-started">
    <div class="max-w-4xl mx-auto px-6">
      <div class="mb-16">
        <SectionDivider centered>Get Started</SectionDivider>
      </div>
      <div class="space-y-0 relative">
        <div class="absolute left-[19px] top-0 bottom-0 w-px bg-border-strong z-0"></div>

        <div class="flex gap-8 relative z-10 pb-16">
          <div class="flex flex-col items-center">
            <div class="bg-bg border border-border-strong w-10 h-10 flex items-center justify-center text-white font-bold text-sm">01</div>
          </div>
          <div class="w-full pt-1">
            <h3 class="text-white font-bold mb-2 text-lg">Design</h3>
            <p class="text-dim text-sm mb-4">Initialize your project with a single command.</p>
            <div class="w-full max-w-md">
              <TuiCodeBox title="terminal" command="npx stitch-mcp init" client:idle />
            </div>
          </div>
        </div>

        <div class="flex gap-8 relative z-10 pb-16">
          <div class="flex flex-col items-center">
            <div class="bg-bg border border-border-strong w-10 h-10 flex items-center justify-center text-white font-bold text-sm">02</div>
          </div>
          <div class="w-full pt-1">
            <h3 class="text-white font-bold mb-2 text-lg">Preview</h3>
            <p class="text-dim text-sm mb-4">Visualize generated components locally with hot reload.</p>
            <div class="w-full max-w-md">
              <TuiCodeBox title="terminal" command="stitch serve" client:idle />
            </div>
          </div>
        </div>

        <div class="flex gap-8 relative z-10">
          <div class="flex flex-col items-center">
            <div class="bg-bg border border-border-strong w-10 h-10 flex items-center justify-center text-white font-bold text-sm">03</div>
          </div>
          <div class="w-full pt-1">
            <h3 class="text-white font-bold mb-2 text-lg">Ship</h3>
            <p class="text-dim text-sm mb-4">Export clean, framework-specific code ready for production.</p>
            <div class="w-full max-w-md">
              <TuiCodeBox title="terminal" command="stitch site" client:idle />
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  {/* ── Features ── */}
  <section class="py-24 bg-surface border-t border-border-strong">
    <div class="max-w-6xl mx-auto px-6">
      <div class="mb-12">
        <SectionDivider>Features</SectionDivider>
      </div>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <FeatureCard icon=">" title="CLI First" description="Built for the terminal. Fast, scriptable, and easy to integrate into CI/CD pipelines." />
        <FeatureCard icon="⚙" title="Framework Ready" description="Supports React, Vue, Svelte, and vanilla HTML out of the box." />
        <FeatureCard icon="◆" title="Design Tokens" description="Automatically extracts colors, typography, and spacing into CSS variables." />
        <FeatureCard icon="◈" title="AI Native" description="Designed from the ground up to work with Claude, GPT-4, and local LLMs." />
        <FeatureCard icon="⊘" title="Local & Secure" description="Your designs and code never leave your machine unless you want them to." />
        <FeatureCard icon="↻" title="Instant Sync" description="Watch mode detects changes in design files and updates the dev server instantly." />
      </div>
    </div>
  </section>

  {/* ── Footer ── */}
  <footer class="py-12 text-dim border-t border-border-strong">
    <div class="max-w-6xl mx-auto px-6">
      <div class="text-border-strong mb-6 select-none truncate">
        ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
      </div>
      <div class="flex flex-col md:flex-row justify-between items-center gap-6 text-sm">
        <span>© 2025 stitch-mcp</span>
        <div class="flex gap-6">
          <a class="hover:text-white transition-colors" href="/docs/">[ Docs ]</a>
          <a class="hover:text-white transition-colors" href="https://github.com/nicepkg/stitch-mcp" target="_blank" rel="noopener noreferrer">[ GitHub ]</a>
        </div>
      </div>
    </div>
  </footer>
</BaseLayout>
